2025-07-26 08:54:26.945 +07:00 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-26 08:54:27.070 +07:00 [INF] Executed DbCommand (48ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-07-26 08:54:27.243 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [VaiTro] AS [v]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-26 08:54:27.264 +07:00 [INF] Starting web application
2025-07-26 08:54:27.285 +07:00 [INF] User profile is available. Using 'C:\Users\ADMIN\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-26 08:54:27.374 +07:00 [INF] Now listening on: http://localhost:5003
2025-07-26 08:54:27.382 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-26 08:54:27.385 +07:00 [INF] Hosting environment: Development
2025-07-26 08:54:27.389 +07:00 [INF] Content root path: D:\DATN\HANG_REMOTE\qlpg\GymManagement.Web
2025-07-26 08:54:52.063 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5003/ - null null
2025-07-26 08:54:52.094 +07:00 [WRN] Failed to determine the https port for redirect.
2025-07-26 08:54:52.199 +07:00 [INF] Accessing expired session, Key:96d4d356-aa06-d99e-1df6-8a370b6c4bb2
2025-07-26 08:54:52.408 +07:00 [INF] Executed DbCommand (17ms) [Parameters=[@__id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t0].[Id], [t0].[Email], [t0].[EmailXacNhan], [t0].[KichHoat], [t0].[LanDangNhapCuoi], [t0].[MatKhauHash], [t0].[NgayTao], [t0].[NguoiDungId], [t0].[Salt], [t0].[TenDangNhap], [t0].[NguoiDungId0], [t0].[AnhDaiDien], [t0].[Email0], [t0].[GioiTinh], [t0].[Ho], [t0].[LoaiNguoiDung], [t0].[NgaySinh], [t0].[NgayTao0], [t0].[NgayThamGia], [t0].[SoDienThoai], [t0].[Ten], [t0].[TrangThai], [t1].[Id], [t1].[NgayGan], [t1].[TaiKhoanId], [t1].[VaiTroId], [t1].[Id0], [t1].[MoTa], [t1].[NgayTao], [t1].[TenVaiTro]
FROM (
    SELECT TOP(1) [t].[Id], [t].[Email], [t].[EmailXacNhan], [t].[KichHoat], [t].[LanDangNhapCuoi], [t].[MatKhauHash], [t].[NgayTao], [t].[NguoiDungId], [t].[Salt], [t].[TenDangNhap], [n].[NguoiDungId] AS [NguoiDungId0], [n].[AnhDaiDien], [n].[Email] AS [Email0], [n].[GioiTinh], [n].[Ho], [n].[LoaiNguoiDung], [n].[NgaySinh], [n].[NgayTao] AS [NgayTao0], [n].[NgayThamGia], [n].[SoDienThoai], [n].[Ten], [n].[TrangThai]
    FROM [TaiKhoan] AS [t]
    LEFT JOIN [NguoiDungs] AS [n] ON [t].[NguoiDungId] = [n].[NguoiDungId]
    WHERE [t].[Id] = @__id_0
) AS [t0]
LEFT JOIN (
    SELECT [t2].[Id], [t2].[NgayGan], [t2].[TaiKhoanId], [t2].[VaiTroId], [v].[Id] AS [Id0], [v].[MoTa], [v].[NgayTao], [v].[TenVaiTro]
    FROM [TaiKhoanVaiTros] AS [t2]
    INNER JOIN [VaiTro] AS [v] ON [t2].[VaiTroId] = [v].[Id]
) AS [t1] ON [t0].[Id] = [t1].[TaiKhoanId]
ORDER BY [t0].[Id], [t0].[NguoiDungId0], [t1].[Id]
2025-07-26 08:54:52.574 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [v].[TenVaiTro]
FROM [TaiKhoanVaiTros] AS [t]
INNER JOIN [VaiTro] AS [v] ON [t].[VaiTroId] = [v].[Id]
WHERE [t].[TaiKhoanId] = @__userId_0
2025-07-26 08:54:52.599 +07:00 [INF] User session set for user: member4
2025-07-26 08:54:52.609 +07:00 [INF] Executing endpoint 'GymManagement.Web.Controllers.HomeController.Index (GymManagement.Web)'
2025-07-26 08:54:52.627 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller GymManagement.Web.Controllers.HomeController (GymManagement.Web).
2025-07-26 08:54:52.719 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[GoiTapId], [t].[Gia], [t].[MoTa], [t].[SoBuoiToiDa], [t].[TenGoi], [t].[ThoiHanThang], [d0].[DangKyId], [d0].[GoiTapId], [d0].[LopHocId], [d0].[LyDoHuy], [d0].[NgayBatDau], [d0].[NgayKetThuc], [d0].[NgayTao], [d0].[NguoiDungId], [d0].[PhiDangKy], [d0].[TrangThai]
FROM (
    SELECT TOP(@__p_0) [g].[GoiTapId], [g].[Gia], [g].[MoTa], [g].[SoBuoiToiDa], [g].[TenGoi], [g].[ThoiHanThang], (
        SELECT COUNT(*)
        FROM [DangKys] AS [d]
        WHERE [g].[GoiTapId] = [d].[GoiTapId]) AS [c]
    FROM [GoiTaps] AS [g]
    ORDER BY (
        SELECT COUNT(*)
        FROM [DangKys] AS [d]
        WHERE [g].[GoiTapId] = [d].[GoiTapId]) DESC
) AS [t]
LEFT JOIN [DangKys] AS [d0] ON [t].[GoiTapId] = [d0].[GoiTapId]
ORDER BY [t].[c] DESC, [t].[GoiTapId]
2025-07-26 08:54:52.804 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__nguoiDungId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DangKyId], [d].[GoiTapId], [d].[LopHocId], [d].[LyDoHuy], [d].[NgayBatDau], [d].[NgayKetThuc], [d].[NgayTao], [d].[NguoiDungId], [d].[PhiDangKy], [d].[TrangThai], [g].[GoiTapId], [g].[Gia], [g].[MoTa], [g].[SoBuoiToiDa], [g].[TenGoi], [g].[ThoiHanThang], [l].[LopHocId], [l].[GiaTuyChinh], [l].[GioBatDau], [l].[GioKetThuc], [l].[HlvId], [l].[MoTa], [l].[SucChua], [l].[TenLop], [l].[ThoiLuong], [l].[ThuTrongTuan], [l].[TrangThai]
FROM [DangKys] AS [d]
LEFT JOIN [GoiTaps] AS [g] ON [d].[GoiTapId] = [g].[GoiTapId]
LEFT JOIN [LopHocs] AS [l] ON [d].[LopHocId] = [l].[LopHocId]
WHERE [d].[NguoiDungId] = @__nguoiDungId_0
ORDER BY [d].[NgayBatDau] DESC
2025-07-26 08:54:52.877 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[LopHocId], [l].[GiaTuyChinh], [l].[GioBatDau], [l].[GioKetThuc], [l].[HlvId], [l].[MoTa], [l].[SucChua], [l].[TenLop], [l].[ThoiLuong], [l].[ThuTrongTuan], [l].[TrangThai], [n].[NguoiDungId], [n].[AnhDaiDien], [n].[Email], [n].[GioiTinh], [n].[Ho], [n].[LoaiNguoiDung], [n].[NgaySinh], [n].[NgayTao], [n].[NgayThamGia], [n].[SoDienThoai], [n].[Ten], [n].[TrangThai], [t].[DangKyId], [t].[GoiTapId], [t].[LopHocId], [t].[LyDoHuy], [t].[NgayBatDau], [t].[NgayKetThuc], [t].[NgayTao], [t].[NguoiDungId], [t].[PhiDangKy], [t].[TrangThai]
FROM [LopHocs] AS [l]
LEFT JOIN [NguoiDungs] AS [n] ON [l].[HlvId] = [n].[NguoiDungId]
LEFT JOIN (
    SELECT [d].[DangKyId], [d].[GoiTapId], [d].[LopHocId], [d].[LyDoHuy], [d].[NgayBatDau], [d].[NgayKetThuc], [d].[NgayTao], [d].[NguoiDungId], [d].[PhiDangKy], [d].[TrangThai]
    FROM [DangKys] AS [d]
    WHERE [d].[TrangThai] = N'ACTIVE'
) AS [t] ON [l].[LopHocId] = [t].[LopHocId]
WHERE [l].[TrangThai] = N'OPEN'
ORDER BY [l].[LopHocId], [n].[NguoiDungId]
2025-07-26 08:54:52.910 +07:00 [INF] Executing ViewResult, running view Index.
2025-07-26 08:54:53.032 +07:00 [INF] Executed ViewResult - view Index executed in 126.1433ms.
2025-07-26 08:54:53.044 +07:00 [INF] Executed action GymManagement.Web.Controllers.HomeController.Index (GymManagement.Web) in 410.4695ms
2025-07-26 08:54:53.049 +07:00 [INF] Executed endpoint 'GymManagement.Web.Controllers.HomeController.Index (GymManagement.Web)'
2025-07-26 08:54:53.060 +07:00 [INF] Session started; Key:96d4d356-aa06-d99e-1df6-8a370b6c4bb2, Id:4318ca22-91d2-3c9e-ac17-7148810d829f
2025-07-26 08:54:53.070 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5003/ - 200 null text/html; charset=utf-8 1013.5856ms
2025-07-26 08:55:02.353 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5003/Auth/Logout - null null
2025-07-26 08:55:02.378 +07:00 [INF] Executing endpoint 'GymManagement.Web.Controllers.AuthController.Logout (GymManagement.Web)'
2025-07-26 08:55:02.390 +07:00 [INF] Route matched with {action = "Logout", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Logout() on controller GymManagement.Web.Controllers.AuthController (GymManagement.Web).
2025-07-26 08:55:02.397 +07:00 [INF] User session cleared
2025-07-26 08:55:02.409 +07:00 [INF] AuthenticationScheme: Cookies signed out.
2025-07-26 08:55:02.413 +07:00 [INF] User member4 logged out.
2025-07-26 08:55:02.423 +07:00 [INF] Executing RedirectResult, redirecting to /.
2025-07-26 08:55:02.427 +07:00 [INF] Executed action GymManagement.Web.Controllers.AuthController.Logout (GymManagement.Web) in 33.0306ms
2025-07-26 08:55:02.435 +07:00 [INF] Executed endpoint 'GymManagement.Web.Controllers.AuthController.Logout (GymManagement.Web)'
2025-07-26 08:55:02.442 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5003/Auth/Logout - 302 0 null 88.7718ms
2025-07-26 08:55:02.456 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5003/ - null null
2025-07-26 08:55:02.468 +07:00 [INF] Executing endpoint 'GymManagement.Web.Controllers.HomeController.Index (GymManagement.Web)'
2025-07-26 08:55:02.473 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller GymManagement.Web.Controllers.HomeController (GymManagement.Web).
2025-07-26 08:55:02.576 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[GoiTapId], [t].[Gia], [t].[MoTa], [t].[SoBuoiToiDa], [t].[TenGoi], [t].[ThoiHanThang], [d0].[DangKyId], [d0].[GoiTapId], [d0].[LopHocId], [d0].[LyDoHuy], [d0].[NgayBatDau], [d0].[NgayKetThuc], [d0].[NgayTao], [d0].[NguoiDungId], [d0].[PhiDangKy], [d0].[TrangThai]
FROM (
    SELECT TOP(@__p_0) [g].[GoiTapId], [g].[Gia], [g].[MoTa], [g].[SoBuoiToiDa], [g].[TenGoi], [g].[ThoiHanThang], (
        SELECT COUNT(*)
        FROM [DangKys] AS [d]
        WHERE [g].[GoiTapId] = [d].[GoiTapId]) AS [c]
    FROM [GoiTaps] AS [g]
    ORDER BY (
        SELECT COUNT(*)
        FROM [DangKys] AS [d]
        WHERE [g].[GoiTapId] = [d].[GoiTapId]) DESC
) AS [t]
LEFT JOIN [DangKys] AS [d0] ON [t].[GoiTapId] = [d0].[GoiTapId]
ORDER BY [t].[c] DESC, [t].[GoiTapId]
2025-07-26 08:55:02.582 +07:00 [INF] Executing ViewResult, running view Index.
2025-07-26 08:55:02.589 +07:00 [INF] Executed ViewResult - view Index executed in 7.7599ms.
2025-07-26 08:55:02.592 +07:00 [INF] Executed action GymManagement.Web.Controllers.HomeController.Index (GymManagement.Web) in 114.7944ms
2025-07-26 08:55:02.595 +07:00 [INF] Executed endpoint 'GymManagement.Web.Controllers.HomeController.Index (GymManagement.Web)'
2025-07-26 08:55:02.598 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5003/ - 200 null text/html; charset=utf-8 142.3557ms
2025-07-26 08:55:05.252 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5003/Auth/Login - null null
2025-07-26 08:55:05.286 +07:00 [INF] Executing endpoint 'GymManagement.Web.Controllers.AuthController.Login (GymManagement.Web)'
2025-07-26 08:55:05.301 +07:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(System.String) on controller GymManagement.Web.Controllers.AuthController (GymManagement.Web).
2025-07-26 08:55:05.316 +07:00 [INF] Executing ViewResult, running view Login.
2025-07-26 08:55:05.381 +07:00 [INF] Executed ViewResult - view Login executed in 67.9154ms.
2025-07-26 08:55:05.385 +07:00 [INF] Executed action GymManagement.Web.Controllers.AuthController.Login (GymManagement.Web) in 79.5581ms
2025-07-26 08:55:05.387 +07:00 [INF] Executed endpoint 'GymManagement.Web.Controllers.AuthController.Login (GymManagement.Web)'
2025-07-26 08:55:05.390 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5003/Auth/Login - 200 null text/html; charset=utf-8 137.4435ms
2025-07-26 08:55:10.002 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5003/Auth/Login - application/x-www-form-urlencoded 260
2025-07-26 08:55:10.015 +07:00 [INF] Executing endpoint 'GymManagement.Web.Controllers.AuthController.Login (GymManagement.Web)'
2025-07-26 08:55:10.023 +07:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(GymManagement.Web.Models.ViewModels.LoginViewModel, System.String) on controller GymManagement.Web.Controllers.AuthController (GymManagement.Web).
2025-07-26 08:55:10.089 +07:00 [INF] Executed DbCommand (17ms) [Parameters=[@__username_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT [t0].[Id], [t0].[Email], [t0].[EmailXacNhan], [t0].[KichHoat], [t0].[LanDangNhapCuoi], [t0].[MatKhauHash], [t0].[NgayTao], [t0].[NguoiDungId], [t0].[Salt], [t0].[TenDangNhap], [t0].[NguoiDungId0], [t0].[AnhDaiDien], [t0].[Email0], [t0].[GioiTinh], [t0].[Ho], [t0].[LoaiNguoiDung], [t0].[NgaySinh], [t0].[NgayTao0], [t0].[NgayThamGia], [t0].[SoDienThoai], [t0].[Ten], [t0].[TrangThai], [t1].[Id], [t1].[NgayGan], [t1].[TaiKhoanId], [t1].[VaiTroId], [t1].[Id0], [t1].[MoTa], [t1].[NgayTao], [t1].[TenVaiTro]
FROM (
    SELECT TOP(1) [t].[Id], [t].[Email], [t].[EmailXacNhan], [t].[KichHoat], [t].[LanDangNhapCuoi], [t].[MatKhauHash], [t].[NgayTao], [t].[NguoiDungId], [t].[Salt], [t].[TenDangNhap], [n].[NguoiDungId] AS [NguoiDungId0], [n].[AnhDaiDien], [n].[Email] AS [Email0], [n].[GioiTinh], [n].[Ho], [n].[LoaiNguoiDung], [n].[NgaySinh], [n].[NgayTao] AS [NgayTao0], [n].[NgayThamGia], [n].[SoDienThoai], [n].[Ten], [n].[TrangThai]
    FROM [TaiKhoan] AS [t]
    LEFT JOIN [NguoiDungs] AS [n] ON [t].[NguoiDungId] = [n].[NguoiDungId]
    WHERE [t].[TenDangNhap] = @__username_0
) AS [t0]
LEFT JOIN (
    SELECT [t2].[Id], [t2].[NgayGan], [t2].[TaiKhoanId], [t2].[VaiTroId], [v].[Id] AS [Id0], [v].[MoTa], [v].[NgayTao], [v].[TenVaiTro]
    FROM [TaiKhoanVaiTros] AS [t2]
    INNER JOIN [VaiTro] AS [v] ON [t2].[VaiTroId] = [v].[Id]
) AS [t1] ON [t0].[Id] = [t1].[TaiKhoanId]
ORDER BY [t0].[Id], [t0].[NguoiDungId0], [t1].[Id]
2025-07-26 08:55:10.219 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@p1='?' (Size = 450), @p0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TaiKhoan] SET [LanDangNhapCuoi] = @p0
OUTPUT 1
WHERE [Id] = @p1;
2025-07-26 08:55:10.250 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [v].[TenVaiTro]
FROM [TaiKhoanVaiTros] AS [t]
INNER JOIN [VaiTro] AS [v] ON [t].[VaiTroId] = [v].[Id]
WHERE [t].[TaiKhoanId] = @__userId_0
2025-07-26 08:55:10.259 +07:00 [INF] AuthenticationScheme: Cookies signed in.
2025-07-26 08:55:10.268 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [v].[TenVaiTro]
FROM [TaiKhoanVaiTros] AS [t]
INNER JOIN [VaiTro] AS [v] ON [t].[VaiTroId] = [v].[Id]
WHERE [t].[TaiKhoanId] = @__userId_0
2025-07-26 08:55:10.274 +07:00 [INF] User session set for user: admin
2025-07-26 08:55:10.278 +07:00 [INF] User admin logged in successfully.
2025-07-26 08:55:10.281 +07:00 [INF] Executing RedirectResult, redirecting to /.
2025-07-26 08:55:10.283 +07:00 [INF] Executed action GymManagement.Web.Controllers.AuthController.Login (GymManagement.Web) in 253.5561ms
2025-07-26 08:55:10.287 +07:00 [INF] Executed endpoint 'GymManagement.Web.Controllers.AuthController.Login (GymManagement.Web)'
2025-07-26 08:55:10.295 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5003/Auth/Login - 302 0 null 292.2936ms
2025-07-26 08:55:10.304 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5003/ - null null
2025-07-26 08:55:10.311 +07:00 [INF] Executing endpoint 'GymManagement.Web.Controllers.HomeController.Index (GymManagement.Web)'
2025-07-26 08:55:10.314 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller GymManagement.Web.Controllers.HomeController (GymManagement.Web).
2025-07-26 08:55:10.336 +07:00 [INF] Executing RedirectResult, redirecting to /Home/Dashboard.
2025-07-26 08:55:10.339 +07:00 [INF] Executed action GymManagement.Web.Controllers.HomeController.Index (GymManagement.Web) in 20.1507ms
2025-07-26 08:55:10.343 +07:00 [INF] Executed endpoint 'GymManagement.Web.Controllers.HomeController.Index (GymManagement.Web)'
2025-07-26 08:55:10.348 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5003/ - 302 0 null 44.233ms
2025-07-26 08:55:10.359 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5003/Home/Dashboard - null null
2025-07-26 08:55:10.373 +07:00 [INF] Executing endpoint 'GymManagement.Web.Controllers.HomeController.Dashboard (GymManagement.Web)'
2025-07-26 08:55:10.382 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller GymManagement.Web.Controllers.HomeController (GymManagement.Web).
2025-07-26 08:55:10.389 +07:00 [INF] User action: admin (f2a371dc-c45f-4619-84fe-691582c7fe10) performed AccessDashboard
2025-07-26 08:55:10.416 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [DangKys] AS [d]
WHERE [d].[TrangThai] = N'ACTIVE' AND [d].[NgayKetThuc] >= CAST(CONVERT(date, GETDATE()) AS date)
2025-07-26 08:55:10.435 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__startDate_0='?' (DbType = DateTime2), @__endDate_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [DiemDanhs] AS [d]
WHERE [d].[ThoiGian] >= @__startDate_0 AND [d].[ThoiGian] < @__endDate_1
2025-07-26 08:55:10.455 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__startDate_0='?' (DbType = DateTime2), @__endDate_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([t].[SoTien]), 0.0)
FROM [ThanhToans] AS [t]
WHERE [t].[TrangThai] = N'SUCCESS' AND [t].[NgayThanhToan] >= @__startDate_0 AND [t].[NgayThanhToan] <= @__endDate_1
2025-07-26 08:55:10.471 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__year_0='?' (DbType = Int32), @__month_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([t].[SoTien]), 0.0)
FROM [ThanhToans] AS [t]
WHERE [t].[TrangThai] = N'SUCCESS' AND DATEPART(year, [t].[NgayThanhToan]) = @__year_0 AND DATEPART(month, [t].[NgayThanhToan]) = @__month_1
2025-07-26 08:55:10.481 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__year_0='?' (DbType = Int32), @__month_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([t].[SoTien]), 0.0)
FROM [ThanhToans] AS [t]
WHERE [t].[TrangThai] = N'SUCCESS' AND DATEPART(year, [t].[NgayThanhToan]) = @__year_0 AND DATEPART(month, [t].[NgayThanhToan]) = @__month_1
2025-07-26 08:55:10.514 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__startDate_0='?' (DbType = DateTime2), @__endDate_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DangKyId], [d].[GoiTapId], [d].[LopHocId], [d].[LyDoHuy], [d].[NgayBatDau], [d].[NgayKetThuc], [d].[NgayTao], [d].[NguoiDungId], [d].[PhiDangKy], [d].[TrangThai], [n].[NguoiDungId], [n].[AnhDaiDien], [n].[Email], [n].[GioiTinh], [n].[Ho], [n].[LoaiNguoiDung], [n].[NgaySinh], [n].[NgayTao], [n].[NgayThamGia], [n].[SoDienThoai], [n].[Ten], [n].[TrangThai], [g].[GoiTapId], [g].[Gia], [g].[MoTa], [g].[SoBuoiToiDa], [g].[TenGoi], [g].[ThoiHanThang], [l].[LopHocId], [l].[GiaTuyChinh], [l].[GioBatDau], [l].[GioKetThuc], [l].[HlvId], [l].[MoTa], [l].[SucChua], [l].[TenLop], [l].[ThoiLuong], [l].[ThuTrongTuan], [l].[TrangThai]
FROM [DangKys] AS [d]
INNER JOIN [NguoiDungs] AS [n] ON [d].[NguoiDungId] = [n].[NguoiDungId]
LEFT JOIN [GoiTaps] AS [g] ON [d].[GoiTapId] = [g].[GoiTapId]
LEFT JOIN [LopHocs] AS [l] ON [d].[LopHocId] = [l].[LopHocId]
WHERE [d].[NgayTao] >= @__startDate_0 AND [d].[NgayTao] <= @__endDate_1
ORDER BY [d].[NgayTao] DESC
2025-07-26 08:55:10.542 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DangKyId], [d].[GoiTapId], [d].[LopHocId], [d].[LyDoHuy], [d].[NgayBatDau], [d].[NgayKetThuc], [d].[NgayTao], [d].[NguoiDungId], [d].[PhiDangKy], [d].[TrangThai], [n].[NguoiDungId], [n].[AnhDaiDien], [n].[Email], [n].[GioiTinh], [n].[Ho], [n].[LoaiNguoiDung], [n].[NgaySinh], [n].[NgayTao], [n].[NgayThamGia], [n].[SoDienThoai], [n].[Ten], [n].[TrangThai], [g].[GoiTapId], [g].[Gia], [g].[MoTa], [g].[SoBuoiToiDa], [g].[TenGoi], [g].[ThoiHanThang], [l].[LopHocId], [l].[GiaTuyChinh], [l].[GioBatDau], [l].[GioKetThuc], [l].[HlvId], [l].[MoTa], [l].[SucChua], [l].[TenLop], [l].[ThoiLuong], [l].[ThuTrongTuan], [l].[TrangThai]
FROM [DangKys] AS [d]
INNER JOIN [NguoiDungs] AS [n] ON [d].[NguoiDungId] = [n].[NguoiDungId]
LEFT JOIN [GoiTaps] AS [g] ON [d].[GoiTapId] = [g].[GoiTapId]
LEFT JOIN [LopHocs] AS [l] ON [d].[LopHocId] = [l].[LopHocId]
WHERE [d].[TrangThai] = N'ACTIVE' AND [d].[NgayKetThuc] >= CAST(CONVERT(date, GETDATE()) AS date)
2025-07-26 08:55:10.553 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__startDate_0='?' (DbType = DateTime2), @__endDate_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [DiemDanhs] AS [d]
WHERE [d].[ThoiGian] >= @__startDate_0 AND [d].[ThoiGian] < @__endDate_1
2025-07-26 08:55:10.567 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__startDate_0='?' (DbType = DateTime2), @__endDate_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [DiemDanhs] AS [d]
WHERE [d].[ThoiGian] >= @__startDate_0 AND [d].[ThoiGian] < @__endDate_1
2025-07-26 08:55:10.579 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__startDate_0='?' (DbType = DateTime2), @__endDate_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [DiemDanhs] AS [d]
WHERE [d].[ThoiGian] >= @__startDate_0 AND [d].[ThoiGian] < @__endDate_1
2025-07-26 08:55:10.587 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__startDate_0='?' (DbType = DateTime2), @__endDate_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [DiemDanhs] AS [d]
WHERE [d].[ThoiGian] >= @__startDate_0 AND [d].[ThoiGian] < @__endDate_1
2025-07-26 08:55:10.599 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__startDate_0='?' (DbType = DateTime2), @__endDate_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [DiemDanhs] AS [d]
WHERE [d].[ThoiGian] >= @__startDate_0 AND [d].[ThoiGian] < @__endDate_1
2025-07-26 08:55:10.605 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__startDate_0='?' (DbType = DateTime2), @__endDate_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [DiemDanhs] AS [d]
WHERE [d].[ThoiGian] >= @__startDate_0 AND [d].[ThoiGian] < @__endDate_1
2025-07-26 08:55:10.612 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__startDate_0='?' (DbType = DateTime2), @__endDate_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [DiemDanhs] AS [d]
WHERE [d].[ThoiGian] >= @__startDate_0 AND [d].[ThoiGian] < @__endDate_1
2025-07-26 08:55:10.619 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__startDate_0='?' (DbType = DateTime2), @__endDate_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [DiemDanhs] AS [d]
WHERE [d].[ThoiGian] >= @__startDate_0 AND [d].[ThoiGian] < @__endDate_1
2025-07-26 08:55:10.666 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__startDate_0='?' (DbType = DateTime2), @__endDate_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[ThanhToanId], [t].[DangKyId], [t].[GhiChu], [t].[NgayThanhToan], [t].[PhuongThuc], [t].[SoTien], [t].[TrangThai], [d].[DangKyId], [d].[GoiTapId], [d].[LopHocId], [d].[LyDoHuy], [d].[NgayBatDau], [d].[NgayKetThuc], [d].[NgayTao], [d].[NguoiDungId], [d].[PhiDangKy], [d].[TrangThai], [n].[NguoiDungId], [n].[AnhDaiDien], [n].[Email], [n].[GioiTinh], [n].[Ho], [n].[LoaiNguoiDung], [n].[NgaySinh], [n].[NgayTao], [n].[NgayThamGia], [n].[SoDienThoai], [n].[Ten], [n].[TrangThai], [g].[GoiTapId], [g].[Gia], [g].[MoTa], [g].[SoBuoiToiDa], [g].[TenGoi], [g].[ThoiHanThang], [l].[LopHocId], [l].[GiaTuyChinh], [l].[GioBatDau], [l].[GioKetThuc], [l].[HlvId], [l].[MoTa], [l].[SucChua], [l].[TenLop], [l].[ThoiLuong], [l].[ThuTrongTuan], [l].[TrangThai]
FROM [ThanhToans] AS [t]
INNER JOIN [DangKys] AS [d] ON [t].[DangKyId] = [d].[DangKyId]
INNER JOIN [NguoiDungs] AS [n] ON [d].[NguoiDungId] = [n].[NguoiDungId]
LEFT JOIN [GoiTaps] AS [g] ON [d].[GoiTapId] = [g].[GoiTapId]
LEFT JOIN [LopHocs] AS [l] ON [d].[LopHocId] = [l].[LopHocId]
WHERE [t].[NgayThanhToan] >= @__startDate_0 AND [t].[NgayThanhToan] <= @__endDate_1
ORDER BY [t].[NgayThanhToan] DESC
2025-07-26 08:55:10.678 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-07-26 08:55:10.722 +07:00 [INF] Executed ViewResult - view Dashboard executed in 44.6736ms.
2025-07-26 08:55:10.734 +07:00 [INF] Executed action GymManagement.Web.Controllers.HomeController.Dashboard (GymManagement.Web) in 347.656ms
2025-07-26 08:55:10.739 +07:00 [INF] Executed endpoint 'GymManagement.Web.Controllers.HomeController.Dashboard (GymManagement.Web)'
2025-07-26 08:55:10.747 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5003/Home/Dashboard - 200 null text/html; charset=utf-8 387.4523ms
2025-07-26 08:55:10.845 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5003/images/gym-logo.png - null null
2025-07-26 08:55:10.855 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5003/images/gym-logo.png - 404 0 null 9.9252ms
2025-07-26 08:55:10.865 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5003/images/gym-logo.png, Response status code: 404
2025-07-26 08:55:13.332 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5003/Home/GetRealtimeStats - null null
2025-07-26 08:55:13.387 +07:00 [INF] Executing endpoint 'GymManagement.Web.Controllers.HomeController.GetRealtimeStats (GymManagement.Web)'
2025-07-26 08:55:13.413 +07:00 [INF] Route matched with {action = "GetRealtimeStats", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRealtimeStats() on controller GymManagement.Web.Controllers.HomeController (GymManagement.Web).
2025-07-26 08:55:13.586 +07:00 [INF] Executed DbCommand (155ms) [Parameters=[@__startDate_0='?' (DbType = DateTime2), @__endDate_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [DiemDanhs] AS [d]
WHERE [d].[ThoiGian] >= @__startDate_0 AND [d].[ThoiGian] < @__endDate_1
2025-07-26 08:55:13.617 +07:00 [INF] Executed DbCommand (20ms) [Parameters=[@__startDate_0='?' (DbType = DateTime2), @__endDate_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([t].[SoTien]), 0.0)
FROM [ThanhToans] AS [t]
WHERE [t].[TrangThai] = N'SUCCESS' AND [t].[NgayThanhToan] >= @__startDate_0 AND [t].[NgayThanhToan] <= @__endDate_1
2025-07-26 08:55:15.056 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [DangKys] AS [d]
WHERE [d].[TrangThai] = N'ACTIVE' AND [d].[NgayKetThuc] >= CAST(CONVERT(date, GETDATE()) AS date)
2025-07-26 08:55:15.067 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType67`4[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-26 08:55:15.110 +07:00 [INF] Executed action GymManagement.Web.Controllers.HomeController.GetRealtimeStats (GymManagement.Web) in 1683.379ms
2025-07-26 08:55:15.143 +07:00 [INF] Executed endpoint 'GymManagement.Web.Controllers.HomeController.GetRealtimeStats (GymManagement.Web)'
2025-07-26 08:55:15.151 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5003/Home/GetRealtimeStats - 200 null application/json; charset=utf-8 1818.8615ms
2025-07-26 08:55:15.479 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5003/GoiTap - null null
2025-07-26 08:55:15.515 +07:00 [INF] Executing endpoint 'GymManagement.Web.Controllers.GoiTapController.Index (GymManagement.Web)'
2025-07-26 08:55:15.525 +07:00 [INF] Route matched with {action = "Index", controller = "GoiTap"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller GymManagement.Web.Controllers.GoiTapController (GymManagement.Web).
2025-07-26 08:55:15.551 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[GoiTapId], [g].[Gia], [g].[MoTa], [g].[SoBuoiToiDa], [g].[TenGoi], [g].[ThoiHanThang]
FROM [GoiTaps] AS [g]
2025-07-26 08:55:15.564 +07:00 [INF] Executing ViewResult, running view Index.
2025-07-26 08:55:15.609 +07:00 [INF] Executed ViewResult - view Index executed in 46.3761ms.
2025-07-26 08:55:15.617 +07:00 [INF] Executed action GymManagement.Web.Controllers.GoiTapController.Index (GymManagement.Web) in 85.2334ms
2025-07-26 08:55:15.648 +07:00 [INF] Executed endpoint 'GymManagement.Web.Controllers.GoiTapController.Index (GymManagement.Web)'
2025-07-26 08:55:15.663 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5003/GoiTap - 200 null text/html; charset=utf-8 183.616ms
2025-07-26 08:55:15.730 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5003/images/gym-logo.png - null null
2025-07-26 08:55:15.930 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5003/images/gym-logo.png - 404 0 null 199.4914ms
2025-07-26 08:55:15.966 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5003/images/gym-logo.png, Response status code: 404
2025-07-26 08:55:21.654 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5003/GoiTap/Create - null null
2025-07-26 08:55:21.661 +07:00 [INF] Executing endpoint 'GymManagement.Web.Controllers.GoiTapController.Create (GymManagement.Web)'
2025-07-26 08:55:21.668 +07:00 [INF] Route matched with {action = "Create", controller = "GoiTap"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Create() on controller GymManagement.Web.Controllers.GoiTapController (GymManagement.Web).
2025-07-26 08:55:21.673 +07:00 [INF] Executing ViewResult, running view Create.
2025-07-26 08:55:21.722 +07:00 [INF] Executed ViewResult - view Create executed in 49.8483ms.
2025-07-26 08:55:21.725 +07:00 [INF] Executed action GymManagement.Web.Controllers.GoiTapController.Create (GymManagement.Web) in 53.2477ms
2025-07-26 08:55:21.728 +07:00 [INF] Executed endpoint 'GymManagement.Web.Controllers.GoiTapController.Create (GymManagement.Web)'
2025-07-26 08:55:21.731 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5003/GoiTap/Create - 200 null text/html; charset=utf-8 76.204ms
2025-07-26 08:55:21.792 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5003/images/gym-logo.png - null null
2025-07-26 08:55:21.799 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5003/images/gym-logo.png - 404 0 null 7.2622ms
2025-07-26 08:55:21.808 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5003/images/gym-logo.png, Response status code: 404
2025-07-26 08:57:08.127 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5003/GoiTap/Create - application/x-www-form-urlencoded 0
2025-07-26 08:57:08.209 +07:00 [INF] Executing endpoint 'GymManagement.Web.Controllers.GoiTapController.Create (GymManagement.Web)'
2025-07-26 08:57:08.216 +07:00 [INF] Route matched with {action = "Create", controller = "GoiTap"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(GymManagement.Web.Models.DTOs.CreateGoiTapDto) on controller GymManagement.Web.Controllers.GoiTapController (GymManagement.Web).
2025-07-26 08:57:08.285 +07:00 [INF] Antiforgery token validation failed. The required antiforgery request token was not provided in either form field "__RequestVerificationToken" or header value "RequestVerificationToken".
Microsoft.AspNetCore.Antiforgery.AntiforgeryValidationException: The required antiforgery request token was not provided in either form field "__RequestVerificationToken" or header value "RequestVerificationToken".
   at Microsoft.AspNetCore.Antiforgery.DefaultAntiforgery.ValidateRequestAsync(HttpContext httpContext)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.Filters.ValidateAntiforgeryTokenAuthorizationFilter.OnAuthorizationAsync(AuthorizationFilterContext context)
2025-07-26 08:57:08.307 +07:00 [INF] Authorization failed for the request at filter 'Microsoft.AspNetCore.Mvc.ViewFeatures.Filters.ValidateAntiforgeryTokenAuthorizationFilter'.
2025-07-26 08:57:08.313 +07:00 [INF] Executing StatusCodeResult, setting HTTP status code 400
2025-07-26 08:57:08.314 +07:00 [INF] Executed action GymManagement.Web.Controllers.GoiTapController.Create (GymManagement.Web) in 95.0564ms
2025-07-26 08:57:08.316 +07:00 [INF] Executed endpoint 'GymManagement.Web.Controllers.GoiTapController.Create (GymManagement.Web)'
2025-07-26 08:57:08.317 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5003/GoiTap/Create - 400 0 null 190.6737ms
2025-07-26 09:06:06.609 +07:00 [INF] Executed DbCommand (37ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-26 09:06:06.762 +07:00 [INF] Executed DbCommand (56ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-07-26 09:06:07.021 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [VaiTro] AS [v]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-26 09:06:07.041 +07:00 [INF] Starting web application
2025-07-26 09:06:07.057 +07:00 [INF] User profile is available. Using 'C:\Users\ADMIN\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-26 09:06:07.139 +07:00 [INF] Now listening on: http://localhost:5003
2025-07-26 09:06:07.144 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-26 09:06:07.149 +07:00 [INF] Hosting environment: Development
2025-07-26 09:06:07.153 +07:00 [INF] Content root path: D:\DATN\HANG_REMOTE\qlpg\GymManagement.Web
2025-07-26 09:06:34.282 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5003/Auth/Login - null null
2025-07-26 09:06:34.301 +07:00 [WRN] Failed to determine the https port for redirect.
2025-07-26 09:06:34.393 +07:00 [INF] Executing endpoint 'GymManagement.Web.Controllers.AuthController.Login (GymManagement.Web)'
2025-07-26 09:06:34.414 +07:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(System.String) on controller GymManagement.Web.Controllers.AuthController (GymManagement.Web).
2025-07-26 09:06:34.440 +07:00 [INF] Executing RedirectResult, redirecting to /.
2025-07-26 09:06:34.447 +07:00 [INF] Executed action GymManagement.Web.Controllers.AuthController.Login (GymManagement.Web) in 26.355ms
2025-07-26 09:06:34.451 +07:00 [INF] Executed endpoint 'GymManagement.Web.Controllers.AuthController.Login (GymManagement.Web)'
2025-07-26 09:06:34.460 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5003/Auth/Login - 302 0 null 180.2667ms
2025-07-26 09:06:34.476 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5003/ - null null
2025-07-26 09:06:34.494 +07:00 [INF] Accessing expired session, Key:96d4d356-aa06-d99e-1df6-8a370b6c4bb2
2025-07-26 09:06:34.727 +07:00 [INF] Executed DbCommand (21ms) [Parameters=[@__id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t0].[Id], [t0].[Email], [t0].[EmailXacNhan], [t0].[KichHoat], [t0].[LanDangNhapCuoi], [t0].[MatKhauHash], [t0].[NgayTao], [t0].[NguoiDungId], [t0].[Salt], [t0].[TenDangNhap], [t0].[NguoiDungId0], [t0].[AnhDaiDien], [t0].[Email0], [t0].[GioiTinh], [t0].[Ho], [t0].[LoaiNguoiDung], [t0].[NgaySinh], [t0].[NgayTao0], [t0].[NgayThamGia], [t0].[SoDienThoai], [t0].[Ten], [t0].[TrangThai], [t1].[Id], [t1].[NgayGan], [t1].[TaiKhoanId], [t1].[VaiTroId], [t1].[Id0], [t1].[MoTa], [t1].[NgayTao], [t1].[TenVaiTro]
FROM (
    SELECT TOP(1) [t].[Id], [t].[Email], [t].[EmailXacNhan], [t].[KichHoat], [t].[LanDangNhapCuoi], [t].[MatKhauHash], [t].[NgayTao], [t].[NguoiDungId], [t].[Salt], [t].[TenDangNhap], [n].[NguoiDungId] AS [NguoiDungId0], [n].[AnhDaiDien], [n].[Email] AS [Email0], [n].[GioiTinh], [n].[Ho], [n].[LoaiNguoiDung], [n].[NgaySinh], [n].[NgayTao] AS [NgayTao0], [n].[NgayThamGia], [n].[SoDienThoai], [n].[Ten], [n].[TrangThai]
    FROM [TaiKhoan] AS [t]
    LEFT JOIN [NguoiDungs] AS [n] ON [t].[NguoiDungId] = [n].[NguoiDungId]
    WHERE [t].[Id] = @__id_0
) AS [t0]
LEFT JOIN (
    SELECT [t2].[Id], [t2].[NgayGan], [t2].[TaiKhoanId], [t2].[VaiTroId], [v].[Id] AS [Id0], [v].[MoTa], [v].[NgayTao], [v].[TenVaiTro]
    FROM [TaiKhoanVaiTros] AS [t2]
    INNER JOIN [VaiTro] AS [v] ON [t2].[VaiTroId] = [v].[Id]
) AS [t1] ON [t0].[Id] = [t1].[TaiKhoanId]
ORDER BY [t0].[Id], [t0].[NguoiDungId0], [t1].[Id]
2025-07-26 09:06:34.916 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [v].[TenVaiTro]
FROM [TaiKhoanVaiTros] AS [t]
INNER JOIN [VaiTro] AS [v] ON [t].[VaiTroId] = [v].[Id]
WHERE [t].[TaiKhoanId] = @__userId_0
2025-07-26 09:06:34.948 +07:00 [INF] User session set for user: admin
2025-07-26 09:06:34.954 +07:00 [INF] Executing endpoint 'GymManagement.Web.Controllers.HomeController.Index (GymManagement.Web)'
2025-07-26 09:06:34.964 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller GymManagement.Web.Controllers.HomeController (GymManagement.Web).
2025-07-26 09:06:35.006 +07:00 [INF] Executing RedirectResult, redirecting to /Home/Dashboard.
2025-07-26 09:06:35.011 +07:00 [INF] Executed action GymManagement.Web.Controllers.HomeController.Index (GymManagement.Web) in 37.138ms
2025-07-26 09:06:35.015 +07:00 [INF] Executed endpoint 'GymManagement.Web.Controllers.HomeController.Index (GymManagement.Web)'
2025-07-26 09:06:35.023 +07:00 [INF] Session started; Key:96d4d356-aa06-d99e-1df6-8a370b6c4bb2, Id:3f66b7d4-32a5-dffc-9d48-ae9a25182024
2025-07-26 09:06:35.030 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5003/ - 302 0 null 554.592ms
2025-07-26 09:06:35.039 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5003/Home/Dashboard - null null
2025-07-26 09:06:35.057 +07:00 [INF] Executing endpoint 'GymManagement.Web.Controllers.HomeController.Dashboard (GymManagement.Web)'
2025-07-26 09:06:35.065 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller GymManagement.Web.Controllers.HomeController (GymManagement.Web).
2025-07-26 09:06:35.134 +07:00 [INF] User action: admin (f2a371dc-c45f-4619-84fe-691582c7fe10) performed AccessDashboard
2025-07-26 09:06:35.191 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [DangKys] AS [d]
WHERE [d].[TrangThai] = N'ACTIVE' AND [d].[NgayKetThuc] >= CAST(CONVERT(date, GETDATE()) AS date)
2025-07-26 09:06:35.210 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__startDate_0='?' (DbType = DateTime2), @__endDate_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [DiemDanhs] AS [d]
WHERE [d].[ThoiGian] >= @__startDate_0 AND [d].[ThoiGian] < @__endDate_1
2025-07-26 09:06:35.243 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__startDate_0='?' (DbType = DateTime2), @__endDate_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([t].[SoTien]), 0.0)
FROM [ThanhToans] AS [t]
WHERE [t].[TrangThai] = N'SUCCESS' AND [t].[NgayThanhToan] >= @__startDate_0 AND [t].[NgayThanhToan] <= @__endDate_1
2025-07-26 09:06:35.272 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__year_0='?' (DbType = Int32), @__month_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([t].[SoTien]), 0.0)
FROM [ThanhToans] AS [t]
WHERE [t].[TrangThai] = N'SUCCESS' AND DATEPART(year, [t].[NgayThanhToan]) = @__year_0 AND DATEPART(month, [t].[NgayThanhToan]) = @__month_1
2025-07-26 09:06:35.283 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__year_0='?' (DbType = Int32), @__month_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([t].[SoTien]), 0.0)
FROM [ThanhToans] AS [t]
WHERE [t].[TrangThai] = N'SUCCESS' AND DATEPART(year, [t].[NgayThanhToan]) = @__year_0 AND DATEPART(month, [t].[NgayThanhToan]) = @__month_1
2025-07-26 09:06:35.335 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__startDate_0='?' (DbType = DateTime2), @__endDate_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DangKyId], [d].[GoiTapId], [d].[LopHocId], [d].[LyDoHuy], [d].[NgayBatDau], [d].[NgayKetThuc], [d].[NgayTao], [d].[NguoiDungId], [d].[PhiDangKy], [d].[TrangThai], [n].[NguoiDungId], [n].[AnhDaiDien], [n].[Email], [n].[GioiTinh], [n].[Ho], [n].[LoaiNguoiDung], [n].[NgaySinh], [n].[NgayTao], [n].[NgayThamGia], [n].[SoDienThoai], [n].[Ten], [n].[TrangThai], [g].[GoiTapId], [g].[Gia], [g].[MoTa], [g].[SoBuoiToiDa], [g].[TenGoi], [g].[ThoiHanThang], [l].[LopHocId], [l].[GiaTuyChinh], [l].[GioBatDau], [l].[GioKetThuc], [l].[HlvId], [l].[MoTa], [l].[SucChua], [l].[TenLop], [l].[ThoiLuong], [l].[ThuTrongTuan], [l].[TrangThai]
FROM [DangKys] AS [d]
INNER JOIN [NguoiDungs] AS [n] ON [d].[NguoiDungId] = [n].[NguoiDungId]
LEFT JOIN [GoiTaps] AS [g] ON [d].[GoiTapId] = [g].[GoiTapId]
LEFT JOIN [LopHocs] AS [l] ON [d].[LopHocId] = [l].[LopHocId]
WHERE [d].[NgayTao] >= @__startDate_0 AND [d].[NgayTao] <= @__endDate_1
ORDER BY [d].[NgayTao] DESC
2025-07-26 09:06:35.477 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DangKyId], [d].[GoiTapId], [d].[LopHocId], [d].[LyDoHuy], [d].[NgayBatDau], [d].[NgayKetThuc], [d].[NgayTao], [d].[NguoiDungId], [d].[PhiDangKy], [d].[TrangThai], [n].[NguoiDungId], [n].[AnhDaiDien], [n].[Email], [n].[GioiTinh], [n].[Ho], [n].[LoaiNguoiDung], [n].[NgaySinh], [n].[NgayTao], [n].[NgayThamGia], [n].[SoDienThoai], [n].[Ten], [n].[TrangThai], [g].[GoiTapId], [g].[Gia], [g].[MoTa], [g].[SoBuoiToiDa], [g].[TenGoi], [g].[ThoiHanThang], [l].[LopHocId], [l].[GiaTuyChinh], [l].[GioBatDau], [l].[GioKetThuc], [l].[HlvId], [l].[MoTa], [l].[SucChua], [l].[TenLop], [l].[ThoiLuong], [l].[ThuTrongTuan], [l].[TrangThai]
FROM [DangKys] AS [d]
INNER JOIN [NguoiDungs] AS [n] ON [d].[NguoiDungId] = [n].[NguoiDungId]
LEFT JOIN [GoiTaps] AS [g] ON [d].[GoiTapId] = [g].[GoiTapId]
LEFT JOIN [LopHocs] AS [l] ON [d].[LopHocId] = [l].[LopHocId]
WHERE [d].[TrangThai] = N'ACTIVE' AND [d].[NgayKetThuc] >= CAST(CONVERT(date, GETDATE()) AS date)
2025-07-26 09:06:35.496 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__startDate_0='?' (DbType = DateTime2), @__endDate_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [DiemDanhs] AS [d]
WHERE [d].[ThoiGian] >= @__startDate_0 AND [d].[ThoiGian] < @__endDate_1
2025-07-26 09:06:35.518 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__startDate_0='?' (DbType = DateTime2), @__endDate_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [DiemDanhs] AS [d]
WHERE [d].[ThoiGian] >= @__startDate_0 AND [d].[ThoiGian] < @__endDate_1
2025-07-26 09:06:35.532 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__startDate_0='?' (DbType = DateTime2), @__endDate_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [DiemDanhs] AS [d]
WHERE [d].[ThoiGian] >= @__startDate_0 AND [d].[ThoiGian] < @__endDate_1
2025-07-26 09:06:35.547 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__startDate_0='?' (DbType = DateTime2), @__endDate_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [DiemDanhs] AS [d]
WHERE [d].[ThoiGian] >= @__startDate_0 AND [d].[ThoiGian] < @__endDate_1
2025-07-26 09:06:35.561 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__startDate_0='?' (DbType = DateTime2), @__endDate_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [DiemDanhs] AS [d]
WHERE [d].[ThoiGian] >= @__startDate_0 AND [d].[ThoiGian] < @__endDate_1
2025-07-26 09:06:35.580 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__startDate_0='?' (DbType = DateTime2), @__endDate_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [DiemDanhs] AS [d]
WHERE [d].[ThoiGian] >= @__startDate_0 AND [d].[ThoiGian] < @__endDate_1
2025-07-26 09:06:35.597 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__startDate_0='?' (DbType = DateTime2), @__endDate_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [DiemDanhs] AS [d]
WHERE [d].[ThoiGian] >= @__startDate_0 AND [d].[ThoiGian] < @__endDate_1
2025-07-26 09:06:35.609 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__startDate_0='?' (DbType = DateTime2), @__endDate_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [DiemDanhs] AS [d]
WHERE [d].[ThoiGian] >= @__startDate_0 AND [d].[ThoiGian] < @__endDate_1
2025-07-26 09:06:35.671 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[@__startDate_0='?' (DbType = DateTime2), @__endDate_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[ThanhToanId], [t].[DangKyId], [t].[GhiChu], [t].[NgayThanhToan], [t].[PhuongThuc], [t].[SoTien], [t].[TrangThai], [d].[DangKyId], [d].[GoiTapId], [d].[LopHocId], [d].[LyDoHuy], [d].[NgayBatDau], [d].[NgayKetThuc], [d].[NgayTao], [d].[NguoiDungId], [d].[PhiDangKy], [d].[TrangThai], [n].[NguoiDungId], [n].[AnhDaiDien], [n].[Email], [n].[GioiTinh], [n].[Ho], [n].[LoaiNguoiDung], [n].[NgaySinh], [n].[NgayTao], [n].[NgayThamGia], [n].[SoDienThoai], [n].[Ten], [n].[TrangThai], [g].[GoiTapId], [g].[Gia], [g].[MoTa], [g].[SoBuoiToiDa], [g].[TenGoi], [g].[ThoiHanThang], [l].[LopHocId], [l].[GiaTuyChinh], [l].[GioBatDau], [l].[GioKetThuc], [l].[HlvId], [l].[MoTa], [l].[SucChua], [l].[TenLop], [l].[ThoiLuong], [l].[ThuTrongTuan], [l].[TrangThai]
FROM [ThanhToans] AS [t]
INNER JOIN [DangKys] AS [d] ON [t].[DangKyId] = [d].[DangKyId]
INNER JOIN [NguoiDungs] AS [n] ON [d].[NguoiDungId] = [n].[NguoiDungId]
LEFT JOIN [GoiTaps] AS [g] ON [d].[GoiTapId] = [g].[GoiTapId]
LEFT JOIN [LopHocs] AS [l] ON [d].[LopHocId] = [l].[LopHocId]
WHERE [t].[NgayThanhToan] >= @__startDate_0 AND [t].[NgayThanhToan] <= @__endDate_1
ORDER BY [t].[NgayThanhToan] DESC
2025-07-26 09:06:35.720 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-07-26 09:06:35.848 +07:00 [INF] Executed ViewResult - view Dashboard executed in 137.5427ms.
2025-07-26 09:06:35.854 +07:00 [INF] Executed action GymManagement.Web.Controllers.HomeController.Dashboard (GymManagement.Web) in 784.2892ms
2025-07-26 09:06:35.878 +07:00 [INF] Executed endpoint 'GymManagement.Web.Controllers.HomeController.Dashboard (GymManagement.Web)'
2025-07-26 09:06:35.942 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5003/images/gym-logo.png - null null
2025-07-26 09:06:35.948 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5003/Home/Dashboard - 200 null text/html; charset=utf-8 908.3656ms
2025-07-26 09:06:35.967 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5003/images/gym-logo.png - 404 0 null 24.783ms
2025-07-26 09:06:35.982 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5003/images/gym-logo.png, Response status code: 404
2025-07-26 09:06:39.973 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5003/Home/GetRealtimeStats - null null
2025-07-26 09:06:39.983 +07:00 [INF] Executing endpoint 'GymManagement.Web.Controllers.HomeController.GetRealtimeStats (GymManagement.Web)'
2025-07-26 09:06:39.997 +07:00 [INF] Route matched with {action = "GetRealtimeStats", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRealtimeStats() on controller GymManagement.Web.Controllers.HomeController (GymManagement.Web).
2025-07-26 09:06:40.029 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__startDate_0='?' (DbType = DateTime2), @__endDate_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [DiemDanhs] AS [d]
WHERE [d].[ThoiGian] >= @__startDate_0 AND [d].[ThoiGian] < @__endDate_1
2025-07-26 09:06:40.040 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__startDate_0='?' (DbType = DateTime2), @__endDate_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([t].[SoTien]), 0.0)
FROM [ThanhToans] AS [t]
WHERE [t].[TrangThai] = N'SUCCESS' AND [t].[NgayThanhToan] >= @__startDate_0 AND [t].[NgayThanhToan] <= @__endDate_1
2025-07-26 09:06:40.048 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [DangKys] AS [d]
WHERE [d].[TrangThai] = N'ACTIVE' AND [d].[NgayKetThuc] >= CAST(CONVERT(date, GETDATE()) AS date)
2025-07-26 09:06:40.058 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType67`4[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-26 09:06:40.095 +07:00 [INF] Executed action GymManagement.Web.Controllers.HomeController.GetRealtimeStats (GymManagement.Web) in 91.0796ms
2025-07-26 09:06:40.100 +07:00 [INF] Executed endpoint 'GymManagement.Web.Controllers.HomeController.GetRealtimeStats (GymManagement.Web)'
2025-07-26 09:06:40.105 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5003/Home/GetRealtimeStats - 200 null application/json; charset=utf-8 132.4755ms
