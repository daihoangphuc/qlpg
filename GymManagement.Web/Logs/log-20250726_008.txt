2025-07-26 19:43:25.182 +07:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-26 19:43:25.269 +07:00 [INF] Executed DbCommand (31ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-07-26 19:43:25.427 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [VaiTro] AS [v]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-26 19:43:25.450 +07:00 [INF] Starting web application
2025-07-26 19:43:25.464 +07:00 [INF] User profile is available. Using 'C:\Users\ADMIN\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-26 19:43:25.510 +07:00 [INF] Now listening on: http://localhost:5003
2025-07-26 19:43:25.518 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-26 19:43:25.521 +07:00 [INF] Hosting environment: Development
2025-07-26 19:43:25.523 +07:00 [INF] Content root path: D:\DATN\HANG_REMOTE\qlpg\GymManagement.Web
2025-07-26 19:43:30.237 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5003/Auth/Login - null null
2025-07-26 19:43:30.263 +07:00 [WRN] Failed to determine the https port for redirect.
2025-07-26 19:43:30.372 +07:00 [INF] Executing endpoint 'GymManagement.Web.Controllers.AuthController.Login (GymManagement.Web)'
2025-07-26 19:43:30.405 +07:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(System.String) on controller GymManagement.Web.Controllers.AuthController (GymManagement.Web).
2025-07-26 19:43:30.455 +07:00 [INF] Executing RedirectResult, redirecting to /.
2025-07-26 19:43:30.473 +07:00 [INF] Executed action GymManagement.Web.Controllers.AuthController.Login (GymManagement.Web) in 48.5357ms
2025-07-26 19:43:30.492 +07:00 [INF] Executed endpoint 'GymManagement.Web.Controllers.AuthController.Login (GymManagement.Web)'
2025-07-26 19:43:30.507 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5003/Auth/Login - 302 0 null 271.5487ms
2025-07-26 19:43:30.533 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5003/ - null null
2025-07-26 19:43:30.558 +07:00 [INF] Accessing expired session, Key:96d4d356-aa06-d99e-1df6-8a370b6c4bb2
2025-07-26 19:43:30.819 +07:00 [INF] Executed DbCommand (17ms) [Parameters=[@__id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t0].[Id], [t0].[Email], [t0].[EmailXacNhan], [t0].[KichHoat], [t0].[LanDangNhapCuoi], [t0].[MatKhauHash], [t0].[NgayTao], [t0].[NguoiDungId], [t0].[Salt], [t0].[TenDangNhap], [t0].[NguoiDungId0], [t0].[AnhDaiDien], [t0].[Email0], [t0].[GioiTinh], [t0].[Ho], [t0].[LoaiNguoiDung], [t0].[NgaySinh], [t0].[NgayTao0], [t0].[NgayThamGia], [t0].[SoDienThoai], [t0].[Ten], [t0].[TrangThai], [t1].[Id], [t1].[NgayGan], [t1].[TaiKhoanId], [t1].[VaiTroId], [t1].[Id0], [t1].[MoTa], [t1].[NgayTao], [t1].[TenVaiTro]
FROM (
    SELECT TOP(1) [t].[Id], [t].[Email], [t].[EmailXacNhan], [t].[KichHoat], [t].[LanDangNhapCuoi], [t].[MatKhauHash], [t].[NgayTao], [t].[NguoiDungId], [t].[Salt], [t].[TenDangNhap], [n].[NguoiDungId] AS [NguoiDungId0], [n].[AnhDaiDien], [n].[Email] AS [Email0], [n].[GioiTinh], [n].[Ho], [n].[LoaiNguoiDung], [n].[NgaySinh], [n].[NgayTao] AS [NgayTao0], [n].[NgayThamGia], [n].[SoDienThoai], [n].[Ten], [n].[TrangThai]
    FROM [TaiKhoan] AS [t]
    LEFT JOIN [NguoiDungs] AS [n] ON [t].[NguoiDungId] = [n].[NguoiDungId]
    WHERE [t].[Id] = @__id_0
) AS [t0]
LEFT JOIN (
    SELECT [t2].[Id], [t2].[NgayGan], [t2].[TaiKhoanId], [t2].[VaiTroId], [v].[Id] AS [Id0], [v].[MoTa], [v].[NgayTao], [v].[TenVaiTro]
    FROM [TaiKhoanVaiTros] AS [t2]
    INNER JOIN [VaiTro] AS [v] ON [t2].[VaiTroId] = [v].[Id]
) AS [t1] ON [t0].[Id] = [t1].[TaiKhoanId]
ORDER BY [t0].[Id], [t0].[NguoiDungId0], [t1].[Id]
2025-07-26 19:43:30.991 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [v].[TenVaiTro]
FROM [TaiKhoanVaiTros] AS [t]
INNER JOIN [VaiTro] AS [v] ON [t].[VaiTroId] = [v].[Id]
WHERE [t].[TaiKhoanId] = @__userId_0
2025-07-26 19:43:31.025 +07:00 [INF] User session set for user: member4
2025-07-26 19:43:31.031 +07:00 [INF] Executing endpoint 'GymManagement.Web.Controllers.HomeController.Index (GymManagement.Web)'
2025-07-26 19:43:31.038 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller GymManagement.Web.Controllers.HomeController (GymManagement.Web).
2025-07-26 19:43:31.138 +07:00 [INF] Executed DbCommand (16ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[GoiTapId], [t].[Gia], [t].[MoTa], [t].[SoBuoiToiDa], [t].[TenGoi], [t].[ThoiHanThang], [d0].[DangKyId], [d0].[GoiTapId], [d0].[LopHocId], [d0].[LyDoHuy], [d0].[NgayBatDau], [d0].[NgayKetThuc], [d0].[NgayTao], [d0].[NguoiDungId], [d0].[PhiDangKy], [d0].[TrangThai]
FROM (
    SELECT TOP(@__p_0) [g].[GoiTapId], [g].[Gia], [g].[MoTa], [g].[SoBuoiToiDa], [g].[TenGoi], [g].[ThoiHanThang], (
        SELECT COUNT(*)
        FROM [DangKys] AS [d]
        WHERE [g].[GoiTapId] = [d].[GoiTapId]) AS [c]
    FROM [GoiTaps] AS [g]
    ORDER BY (
        SELECT COUNT(*)
        FROM [DangKys] AS [d]
        WHERE [g].[GoiTapId] = [d].[GoiTapId]) DESC
) AS [t]
LEFT JOIN [DangKys] AS [d0] ON [t].[GoiTapId] = [d0].[GoiTapId]
ORDER BY [t].[c] DESC, [t].[GoiTapId]
2025-07-26 19:43:31.234 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__nguoiDungId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DangKyId], [d].[GoiTapId], [d].[LopHocId], [d].[LyDoHuy], [d].[NgayBatDau], [d].[NgayKetThuc], [d].[NgayTao], [d].[NguoiDungId], [d].[PhiDangKy], [d].[TrangThai], [g].[GoiTapId], [g].[Gia], [g].[MoTa], [g].[SoBuoiToiDa], [g].[TenGoi], [g].[ThoiHanThang], [l].[LopHocId], [l].[GiaTuyChinh], [l].[GioBatDau], [l].[GioKetThuc], [l].[HlvId], [l].[MoTa], [l].[SucChua], [l].[TenLop], [l].[ThoiLuong], [l].[ThuTrongTuan], [l].[TrangThai]
FROM [DangKys] AS [d]
LEFT JOIN [GoiTaps] AS [g] ON [d].[GoiTapId] = [g].[GoiTapId]
LEFT JOIN [LopHocs] AS [l] ON [d].[LopHocId] = [l].[LopHocId]
WHERE [d].[NguoiDungId] = @__nguoiDungId_0
ORDER BY [d].[NgayBatDau] DESC
2025-07-26 19:43:31.370 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[LopHocId], [l].[GiaTuyChinh], [l].[GioBatDau], [l].[GioKetThuc], [l].[HlvId], [l].[MoTa], [l].[SucChua], [l].[TenLop], [l].[ThoiLuong], [l].[ThuTrongTuan], [l].[TrangThai], [n].[NguoiDungId], [n].[AnhDaiDien], [n].[Email], [n].[GioiTinh], [n].[Ho], [n].[LoaiNguoiDung], [n].[NgaySinh], [n].[NgayTao], [n].[NgayThamGia], [n].[SoDienThoai], [n].[Ten], [n].[TrangThai], [t].[DangKyId], [t].[GoiTapId], [t].[LopHocId], [t].[LyDoHuy], [t].[NgayBatDau], [t].[NgayKetThuc], [t].[NgayTao], [t].[NguoiDungId], [t].[PhiDangKy], [t].[TrangThai]
FROM [LopHocs] AS [l]
LEFT JOIN [NguoiDungs] AS [n] ON [l].[HlvId] = [n].[NguoiDungId]
LEFT JOIN (
    SELECT [d].[DangKyId], [d].[GoiTapId], [d].[LopHocId], [d].[LyDoHuy], [d].[NgayBatDau], [d].[NgayKetThuc], [d].[NgayTao], [d].[NguoiDungId], [d].[PhiDangKy], [d].[TrangThai]
    FROM [DangKys] AS [d]
    WHERE [d].[TrangThai] = N'ACTIVE'
) AS [t] ON [l].[LopHocId] = [t].[LopHocId]
WHERE [l].[TrangThai] = N'OPEN'
ORDER BY [l].[LopHocId], [n].[NguoiDungId]
2025-07-26 19:43:31.399 +07:00 [INF] Executing ViewResult, running view Index.
2025-07-26 19:43:31.533 +07:00 [INF] Executed ViewResult - view Index executed in 143.8934ms.
2025-07-26 19:43:31.538 +07:00 [INF] Executed action GymManagement.Web.Controllers.HomeController.Index (GymManagement.Web) in 495.4412ms
2025-07-26 19:43:31.549 +07:00 [INF] Executed endpoint 'GymManagement.Web.Controllers.HomeController.Index (GymManagement.Web)'
2025-07-26 19:43:31.563 +07:00 [INF] Session started; Key:96d4d356-aa06-d99e-1df6-8a370b6c4bb2, Id:8ddcb4be-0f65-b185-0b17-e262b83e8886
2025-07-26 19:43:31.599 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5003/ - 200 null text/html; charset=utf-8 1064.8713ms
2025-07-26 19:44:39.976 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5003/Auth/Login - null null
2025-07-26 19:44:39.989 +07:00 [INF] Executing endpoint 'GymManagement.Web.Controllers.AuthController.Login (GymManagement.Web)'
2025-07-26 19:44:39.991 +07:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(System.String) on controller GymManagement.Web.Controllers.AuthController (GymManagement.Web).
2025-07-26 19:44:39.995 +07:00 [INF] Executing ViewResult, running view Login.
2025-07-26 19:44:40.035 +07:00 [INF] Executed ViewResult - view Login executed in 41.061ms.
2025-07-26 19:44:40.039 +07:00 [INF] Executed action GymManagement.Web.Controllers.AuthController.Login (GymManagement.Web) in 45.4264ms
2025-07-26 19:44:40.043 +07:00 [INF] Executed endpoint 'GymManagement.Web.Controllers.AuthController.Login (GymManagement.Web)'
2025-07-26 19:44:40.045 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5003/Auth/Login - 200 null text/html; charset=utf-8 68.4895ms
