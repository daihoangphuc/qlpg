2025-07-22 21:58:12.973 +07:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-22 21:58:13.077 +07:00 [INF] Executed DbCommand (46ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-07-22 21:58:13.232 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [VaiTro] AS [v]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-22 21:58:13.248 +07:00 [INF] Starting web application
2025-07-22 21:58:13.260 +07:00 [INF] User profile is available. Using 'C:\Users\ADMIN\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-22 21:58:13.313 +07:00 [INF] Now listening on: http://localhost:5149
2025-07-22 21:58:13.319 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-22 21:58:13.322 +07:00 [INF] Hosting environment: Development
2025-07-22 21:58:13.324 +07:00 [INF] Content root path: D:\DATN\HANG_REMOTE\qlpg\GymManagement.Web
2025-07-22 21:58:13.364 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5149/ - null null
2025-07-22 21:58:13.379 +07:00 [WRN] Failed to determine the https port for redirect.
2025-07-22 21:58:13.452 +07:00 [INF] Executing endpoint 'GymManagement.Web.Controllers.HomeController.Index (GymManagement.Web)'
2025-07-22 21:58:13.476 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller GymManagement.Web.Controllers.HomeController (GymManagement.Web).
2025-07-22 21:58:13.568 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[GoiTapId], [g].[Gia], [g].[MoTa], [g].[SoBuoiToiDa], [g].[TenGoi], [g].[ThoiHanThang]
FROM [GoiTaps] AS [g]
2025-07-22 21:58:13.756 +07:00 [ERR] Failed executing DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[LopHocId], [l].[GiaTuyChinh], [l].[GioBatDau], [l].[GioKetThuc], [l].[HlvId], [l].[MoTa], [l].[SucChua], [l].[TenLop], [l].[ThoiLuong], [l].[ThuTrongTuan], [l].[TrangThai], [n].[NguoiDungId], [n].[AnhDaiDien], [n].[Email], [n].[GioiTinh], [n].[Ho], [n].[LoaiNguoiDung], [n].[NgaySinh], [n].[NgayTao], [n].[NgayThamGia], [n].[SoDienThoai], [n].[Ten], [n].[TrangThai]
FROM [LopHocs] AS [l]
LEFT JOIN [NguoiDungs] AS [n] ON [l].[HlvId] = [n].[NguoiDungId]
WHERE [l].[TrangThai] = N'OPEN'
2025-07-22 21:58:13.771 +07:00 [ERR] An exception occurred while iterating over the results of a query for context type 'GymManagement.Web.Data.GymDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'MoTa'.
Invalid column name 'ThoiLuong'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:c6d02ac1-a49c-4c54-97ba-1b076c9f2318
Error Number:207,State:1,Class:16
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'MoTa'.
Invalid column name 'ThoiLuong'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:c6d02ac1-a49c-4c54-97ba-1b076c9f2318
Error Number:207,State:1,Class:16
2025-07-22 21:58:13.783 +07:00 [ERR] Error occurred while loading classes
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'MoTa'.
Invalid column name 'ThoiLuong'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at GymManagement.Web.Data.Repositories.LopHocRepository.GetActiveClassesAsync() in D:\DATN\HANG_REMOTE\qlpg\GymManagement.Web\Data\Repositories\LopHocRepository.cs:line 14
   at GymManagement.Web.Services.LopHocService.GetActiveClassesAsync() in D:\DATN\HANG_REMOTE\qlpg\GymManagement.Web\Services\LopHocService.cs:line 88
   at GymManagement.Web.Controllers.HomeController.Index() in D:\DATN\HANG_REMOTE\qlpg\GymManagement.Web\Controllers\HomeController.cs:line 64
ClientConnectionId:c6d02ac1-a49c-4c54-97ba-1b076c9f2318
Error Number:207,State:1,Class:16
2025-07-22 21:58:13.825 +07:00 [INF] Executing ViewResult, running view Index.
2025-07-22 21:58:13.907 +07:00 [INF] Executed ViewResult - view Index executed in 85.5653ms.
2025-07-22 21:58:13.911 +07:00 [INF] Executed action GymManagement.Web.Controllers.HomeController.Index (GymManagement.Web) in 429.1713ms
2025-07-22 21:58:13.914 +07:00 [INF] Executed endpoint 'GymManagement.Web.Controllers.HomeController.Index (GymManagement.Web)'
2025-07-22 21:58:13.924 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5149/ - 200 null text/html; charset=utf-8 561.2531ms
2025-07-22 21:59:54.952 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5149/Account/Login - null null
2025-07-22 21:59:54.962 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5149/Account/Login - 404 0 null 9.5588ms
2025-07-22 21:59:54.973 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5149/Account/Login, Response status code: 404
2025-07-22 22:00:26.801 +07:00 [INF] Application is shutting down...
2025-07-22 22:03:47.369 +07:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-22 22:03:47.464 +07:00 [INF] Executed DbCommand (43ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-07-22 22:03:47.604 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [VaiTro] AS [v]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-22 22:03:47.620 +07:00 [INF] Starting web application
2025-07-22 22:03:47.634 +07:00 [INF] User profile is available. Using 'C:\Users\ADMIN\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-22 22:03:47.677 +07:00 [INF] Now listening on: http://localhost:5149
2025-07-22 22:03:47.681 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-22 22:03:47.686 +07:00 [INF] Hosting environment: Development
2025-07-22 22:03:47.689 +07:00 [INF] Content root path: D:\DATN\HANG_REMOTE\qlpg\GymManagement.Web
2025-07-22 22:04:06.135 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5149/Auth/Login - null null
2025-07-22 22:04:06.149 +07:00 [WRN] Failed to determine the https port for redirect.
2025-07-22 22:04:06.215 +07:00 [INF] Executing endpoint 'GymManagement.Web.Controllers.AuthController.Login (GymManagement.Web)'
2025-07-22 22:04:06.250 +07:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(System.String) on controller GymManagement.Web.Controllers.AuthController (GymManagement.Web).
2025-07-22 22:04:06.286 +07:00 [INF] Executing ViewResult, running view Login.
2025-07-22 22:04:06.391 +07:00 [INF] Executed ViewResult - view Login executed in 107.2639ms.
2025-07-22 22:04:06.399 +07:00 [INF] Executed action GymManagement.Web.Controllers.AuthController.Login (GymManagement.Web) in 143.3782ms
2025-07-22 22:04:06.403 +07:00 [INF] Executed endpoint 'GymManagement.Web.Controllers.AuthController.Login (GymManagement.Web)'
2025-07-22 22:04:06.412 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5149/Auth/Login - 200 null text/html; charset=utf-8 278.6215ms
2025-07-22 22:04:06.515 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5149/lib/jquery-validation/dist/jquery.validate.min.js - null null
2025-07-22 22:04:06.539 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5149/lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.min.js - null null
2025-07-22 22:04:06.568 +07:00 [INF] Sending file. Request path: '/lib/jquery-validation/dist/jquery.validate.min.js'. Physical path: 'D:\DATN\HANG_REMOTE\qlpg\GymManagement.Web\wwwroot\lib\jquery-validation\dist\jquery.validate.min.js'
2025-07-22 22:04:06.568 +07:00 [INF] Sending file. Request path: '/lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.min.js'. Physical path: 'D:\DATN\HANG_REMOTE\qlpg\GymManagement.Web\wwwroot\lib\jquery-validation-unobtrusive\jquery.validate.unobtrusive.min.js'
2025-07-22 22:04:06.574 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5149/lib/jquery-validation/dist/jquery.validate.min.js - 200 24604 text/javascript 58.5396ms
2025-07-22 22:04:06.575 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5149/lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.min.js - 200 5831 text/javascript 36.2511ms
2025-07-22 22:04:12.711 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5149/Auth/Register - null null
2025-07-22 22:04:12.726 +07:00 [INF] Executing endpoint 'GymManagement.Web.Controllers.AuthController.Register (GymManagement.Web)'
2025-07-22 22:04:12.734 +07:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Register() on controller GymManagement.Web.Controllers.AuthController (GymManagement.Web).
2025-07-22 22:04:12.747 +07:00 [INF] Executing ViewResult, running view Register.
2025-07-22 22:04:12.793 +07:00 [INF] Executed ViewResult - view Register executed in 47.9821ms.
2025-07-22 22:04:12.797 +07:00 [INF] Executed action GymManagement.Web.Controllers.AuthController.Register (GymManagement.Web) in 55.7883ms
2025-07-22 22:04:12.801 +07:00 [INF] Executed endpoint 'GymManagement.Web.Controllers.AuthController.Register (GymManagement.Web)'
2025-07-22 22:04:12.811 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5149/Auth/Register - 200 null text/html; charset=utf-8 99.8615ms
2025-07-22 22:04:18.578 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5149/Auth/ForgotPassword - null null
2025-07-22 22:04:18.708 +07:00 [INF] Executing endpoint 'GymManagement.Web.Controllers.AuthController.ForgotPassword (GymManagement.Web)'
2025-07-22 22:04:18.791 +07:00 [INF] Route matched with {action = "ForgotPassword", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult ForgotPassword() on controller GymManagement.Web.Controllers.AuthController (GymManagement.Web).
2025-07-22 22:04:18.798 +07:00 [INF] Executing ViewResult, running view ForgotPassword.
2025-07-22 22:04:18.810 +07:00 [INF] Executed ViewResult - view ForgotPassword executed in 14.4144ms.
2025-07-22 22:04:18.817 +07:00 [INF] Executed action GymManagement.Web.Controllers.AuthController.ForgotPassword (GymManagement.Web) in 22.2269ms
2025-07-22 22:04:18.821 +07:00 [INF] Executed endpoint 'GymManagement.Web.Controllers.AuthController.ForgotPassword (GymManagement.Web)'
2025-07-22 22:04:18.826 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5149/Auth/ForgotPassword - 200 null text/html; charset=utf-8 248.0268ms
2025-07-22 22:04:24.559 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5149/Auth/AccessDenied - null null
2025-07-22 22:04:24.566 +07:00 [INF] Executing endpoint 'GymManagement.Web.Controllers.AuthController.AccessDenied (GymManagement.Web)'
2025-07-22 22:04:24.571 +07:00 [INF] Route matched with {action = "AccessDenied", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult AccessDenied() on controller GymManagement.Web.Controllers.AuthController (GymManagement.Web).
2025-07-22 22:04:24.580 +07:00 [INF] Executing ViewResult, running view AccessDenied.
2025-07-22 22:04:24.587 +07:00 [INF] Executed ViewResult - view AccessDenied executed in 8.6091ms.
2025-07-22 22:04:24.590 +07:00 [INF] Executed action GymManagement.Web.Controllers.AuthController.AccessDenied (GymManagement.Web) in 12.6308ms
2025-07-22 22:04:24.595 +07:00 [INF] Executed endpoint 'GymManagement.Web.Controllers.AuthController.AccessDenied (GymManagement.Web)'
2025-07-22 22:04:24.597 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5149/Auth/AccessDenied - 200 null text/html; charset=utf-8 38.543ms
