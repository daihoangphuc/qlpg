2025-07-22 20:27:08.338 +07:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-22 20:27:08.420 +07:00 [INF] Executed DbCommand (28ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-07-22 20:27:08.544 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [VaiTro] AS [v]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-22 20:27:08.561 +07:00 [INF] Starting web application
2025-07-22 20:27:08.572 +07:00 [INF] User profile is available. Using 'C:\Users\ADMIN\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-22 20:27:08.616 +07:00 [INF] Now listening on: http://localhost:5149
2025-07-22 20:27:08.622 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-22 20:27:08.625 +07:00 [INF] Hosting environment: Development
2025-07-22 20:27:08.627 +07:00 [INF] Content root path: D:\DATN\HANG_REMOTE\qlpg\GymManagement.Web
2025-07-22 20:27:15.870 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5149/ - null null
2025-07-22 20:27:15.888 +07:00 [WRN] Failed to determine the https port for redirect.
2025-07-22 20:27:15.957 +07:00 [INF] Executing endpoint 'GymManagement.Web.Controllers.HomeController.Index (GymManagement.Web)'
2025-07-22 20:27:15.992 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller GymManagement.Web.Controllers.HomeController (GymManagement.Web).
2025-07-22 20:27:16.097 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [DangKys] AS [d]
WHERE [d].[TrangThai] = N'ACTIVE' AND [d].[NgayKetThuc] >= CAST(CONVERT(date, GETDATE()) AS date)
2025-07-22 20:27:16.137 +07:00 [INF] Executed DbCommand (19ms) [Parameters=[@__startDate_0='?' (DbType = DateTime2), @__endDate_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [DiemDanhs] AS [d]
WHERE [d].[ThoiGian] >= @__startDate_0 AND [d].[ThoiGian] < @__endDate_1
2025-07-22 20:27:16.161 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__startDate_0='?' (DbType = DateTime2), @__endDate_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([t].[SoTien]), 0.0)
FROM [ThanhToans] AS [t]
WHERE [t].[TrangThai] = N'SUCCESS' AND [t].[NgayThanhToan] >= @__startDate_0 AND [t].[NgayThanhToan] <= @__endDate_1
2025-07-22 20:27:16.186 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__year_0='?' (DbType = Int32), @__month_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([t].[SoTien]), 0.0)
FROM [ThanhToans] AS [t]
WHERE [t].[TrangThai] = N'SUCCESS' AND DATEPART(year, [t].[NgayThanhToan]) = @__year_0 AND DATEPART(month, [t].[NgayThanhToan]) = @__month_1
2025-07-22 20:27:16.198 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__year_0='?' (DbType = Int32), @__month_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([t].[SoTien]), 0.0)
FROM [ThanhToans] AS [t]
WHERE [t].[TrangThai] = N'SUCCESS' AND DATEPART(year, [t].[NgayThanhToan]) = @__year_0 AND DATEPART(month, [t].[NgayThanhToan]) = @__month_1
2025-07-22 20:27:16.344 +07:00 [ERR] Failed executing DbCommand (6ms) [Parameters=[@__startDate_0='?' (DbType = DateTime2), @__endDate_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DangKyId], [d].[GoiTapId], [d].[LopHocId], [d].[NgayBatDau], [d].[NgayKetThuc], [d].[NgayTao], [d].[NguoiDungId], [d].[TrangThai], [n].[NguoiDungId], [n].[AnhDaiDien], [n].[Email], [n].[GioiTinh], [n].[Ho], [n].[LoaiNguoiDung], [n].[NgaySinh], [n].[NgayTao], [n].[NgayThamGia], [n].[SoDienThoai], [n].[Ten], [n].[TrangThai], [g].[GoiTapId], [g].[Gia], [g].[MoTa], [g].[SoBuoiToiDa], [g].[TenGoi], [g].[ThoiHanThang], [l].[LopHocId], [l].[GiaTuyChinh], [l].[GioBatDau], [l].[GioKetThuc], [l].[HlvId], [l].[MoTa], [l].[SucChua], [l].[TenLop], [l].[ThoiLuong], [l].[ThuTrongTuan], [l].[TrangThai]
FROM [DangKys] AS [d]
INNER JOIN [NguoiDungs] AS [n] ON [d].[NguoiDungId] = [n].[NguoiDungId]
LEFT JOIN [GoiTaps] AS [g] ON [d].[GoiTapId] = [g].[GoiTapId]
LEFT JOIN [LopHocs] AS [l] ON [d].[LopHocId] = [l].[LopHocId]
WHERE [d].[NgayTao] >= @__startDate_0 AND [d].[NgayTao] <= @__endDate_1
ORDER BY [d].[NgayTao] DESC
2025-07-22 20:27:16.375 +07:00 [ERR] An exception occurred while iterating over the results of a query for context type 'GymManagement.Web.Data.GymDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'MoTa'.
Invalid column name 'ThoiLuong'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:060e61e5-3ba6-45f0-9ffd-f44d14f0dc88
Error Number:207,State:1,Class:16
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'MoTa'.
Invalid column name 'ThoiLuong'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:060e61e5-3ba6-45f0-9ffd-f44d14f0dc88
Error Number:207,State:1,Class:16
2025-07-22 20:27:16.394 +07:00 [ERR] Error occurred while loading home page
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'MoTa'.
Invalid column name 'ThoiLuong'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at GymManagement.Web.Data.Repositories.DangKyRepository.GetRegistrationsByDateRangeAsync(DateTime startDate, DateTime endDate) in D:\DATN\HANG_REMOTE\qlpg\GymManagement.Web\Data\Repositories\DangKyRepository.cs:line 70
   at GymManagement.Web.Services.BaoCaoService.GetNewMembersCountAsync(DateTime startDate, DateTime endDate) in D:\DATN\HANG_REMOTE\qlpg\GymManagement.Web\Services\BaoCaoService.cs:line 90
   at GymManagement.Web.Services.BaoCaoService.GetDashboardDataAsync() in D:\DATN\HANG_REMOTE\qlpg\GymManagement.Web\Services\BaoCaoService.cs:line 360
   at GymManagement.Web.Controllers.HomeController.Index() in D:\DATN\HANG_REMOTE\qlpg\GymManagement.Web\Controllers\HomeController.cs:line 48
ClientConnectionId:060e61e5-3ba6-45f0-9ffd-f44d14f0dc88
Error Number:207,State:1,Class:16
2025-07-22 20:27:16.444 +07:00 [INF] Executing ViewResult, running view Index.
2025-07-22 20:27:16.556 +07:00 [INF] Executed ViewResult - view Index executed in 118.3864ms.
2025-07-22 20:27:16.562 +07:00 [INF] Executed action GymManagement.Web.Controllers.HomeController.Index (GymManagement.Web) in 566.2661ms
2025-07-22 20:27:16.568 +07:00 [INF] Executed endpoint 'GymManagement.Web.Controllers.HomeController.Index (GymManagement.Web)'
2025-07-22 20:27:16.580 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5149/ - 200 null text/html; charset=utf-8 712.1636ms
2025-07-22 20:27:16.659 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5149/css/site.css?v=IZ0M0_wM2Uhi7-ENWQ8Kv8mmXHQ3MTv13A9DrzRhDqk - null null
2025-07-22 20:27:16.677 +07:00 [INF] The file /css/site.css was not modified
2025-07-22 20:27:16.680 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5149/css/site.css?v=IZ0M0_wM2Uhi7-ENWQ8Kv8mmXHQ3MTv13A9DrzRhDqk - 304 null text/css 20.8171ms
2025-07-22 20:28:00.238 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5149/Home/Packages - null null
2025-07-22 20:28:00.251 +07:00 [INF] Executing endpoint 'GymManagement.Web.Controllers.HomeController.Packages (GymManagement.Web)'
2025-07-22 20:28:00.273 +07:00 [INF] Route matched with {action = "Packages", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Packages() on controller GymManagement.Web.Controllers.HomeController (GymManagement.Web).
2025-07-22 20:28:00.352 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[GoiTapId], [g].[Gia], [g].[MoTa], [g].[SoBuoiToiDa], [g].[TenGoi], [g].[ThoiHanThang]
FROM [GoiTaps] AS [g]
2025-07-22 20:28:00.427 +07:00 [INF] Executing ViewResult, running view Packages.
2025-07-22 20:28:00.439 +07:00 [INF] Executed ViewResult - view Packages executed in 13.0544ms.
2025-07-22 20:28:00.443 +07:00 [INF] Executed action GymManagement.Web.Controllers.HomeController.Packages (GymManagement.Web) in 164.6582ms
2025-07-22 20:28:00.447 +07:00 [INF] Executed endpoint 'GymManagement.Web.Controllers.HomeController.Packages (GymManagement.Web)'
2025-07-22 20:28:00.452 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5149/Home/Packages - 200 null text/html; charset=utf-8 214.5849ms
2025-07-22 20:28:16.077 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5149/Home/Contact - null null
2025-07-22 20:28:16.086 +07:00 [INF] Executing endpoint 'GymManagement.Web.Controllers.HomeController.Contact (GymManagement.Web)'
2025-07-22 20:28:16.091 +07:00 [INF] Route matched with {action = "Contact", controller = "Home"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Contact() on controller GymManagement.Web.Controllers.HomeController (GymManagement.Web).
2025-07-22 20:28:16.103 +07:00 [INF] Executing ViewResult, running view Contact.
2025-07-22 20:28:16.114 +07:00 [INF] Executed ViewResult - view Contact executed in 10.7052ms.
2025-07-22 20:28:16.116 +07:00 [INF] Executed action GymManagement.Web.Controllers.HomeController.Contact (GymManagement.Web) in 20.4762ms
2025-07-22 20:28:16.119 +07:00 [INF] Executed endpoint 'GymManagement.Web.Controllers.HomeController.Contact (GymManagement.Web)'
2025-07-22 20:28:16.124 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5149/Home/Contact - 200 null text/html; charset=utf-8 46.7633ms
2025-07-22 20:28:18.011 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5149/Home/About - null null
2025-07-22 20:28:18.018 +07:00 [INF] Executing endpoint 'GymManagement.Web.Controllers.HomeController.About (GymManagement.Web)'
2025-07-22 20:28:18.023 +07:00 [INF] Route matched with {action = "About", controller = "Home"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult About() on controller GymManagement.Web.Controllers.HomeController (GymManagement.Web).
2025-07-22 20:28:18.030 +07:00 [INF] Executing ViewResult, running view About.
2025-07-22 20:28:18.040 +07:00 [INF] Executed ViewResult - view About executed in 12.0604ms.
2025-07-22 20:28:18.044 +07:00 [INF] Executed action GymManagement.Web.Controllers.HomeController.About (GymManagement.Web) in 16.7872ms
2025-07-22 20:28:18.046 +07:00 [INF] Executed endpoint 'GymManagement.Web.Controllers.HomeController.About (GymManagement.Web)'
2025-07-22 20:28:18.049 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5149/Home/About - 200 null text/html; charset=utf-8 38.7637ms
2025-07-22 20:29:16.815 +07:00 [INF] Application is shutting down...
2025-07-22 20:29:26.054 +07:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-22 20:29:26.134 +07:00 [INF] Executed DbCommand (26ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-07-22 20:29:26.259 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [VaiTro] AS [v]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-22 20:29:26.277 +07:00 [INF] Starting web application
2025-07-22 20:29:26.288 +07:00 [INF] User profile is available. Using 'C:\Users\ADMIN\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-22 20:29:26.329 +07:00 [INF] Now listening on: http://localhost:5149
2025-07-22 20:29:26.334 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-22 20:29:26.336 +07:00 [INF] Hosting environment: Development
2025-07-22 20:29:26.338 +07:00 [INF] Content root path: D:\DATN\HANG_REMOTE\qlpg\GymManagement.Web
2025-07-22 20:30:13.540 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5149/Home/Packages - null null
2025-07-22 20:30:13.550 +07:00 [WRN] Failed to determine the https port for redirect.
2025-07-22 20:30:13.594 +07:00 [INF] Executing endpoint 'GymManagement.Web.Controllers.HomeController.Packages (GymManagement.Web)'
2025-07-22 20:30:13.620 +07:00 [INF] Route matched with {action = "Packages", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Packages() on controller GymManagement.Web.Controllers.HomeController (GymManagement.Web).
2025-07-22 20:30:13.688 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[GoiTapId], [g].[Gia], [g].[MoTa], [g].[SoBuoiToiDa], [g].[TenGoi], [g].[ThoiHanThang]
FROM [GoiTaps] AS [g]
2025-07-22 20:30:13.755 +07:00 [INF] Executing ViewResult, running view Packages.
2025-07-22 20:30:13.796 +07:00 [INF] Executed ViewResult - view Packages executed in 41.6601ms.
2025-07-22 20:30:13.803 +07:00 [INF] Executed action GymManagement.Web.Controllers.HomeController.Packages (GymManagement.Web) in 177.8711ms
2025-07-22 20:30:13.806 +07:00 [INF] Executed endpoint 'GymManagement.Web.Controllers.HomeController.Packages (GymManagement.Web)'
2025-07-22 20:30:13.815 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5149/Home/Packages - 200 null text/html; charset=utf-8 275.4999ms
2025-07-22 20:35:16.497 +07:00 [INF] Application is shutting down...
